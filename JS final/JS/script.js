
var picsData = [
    {
      id: '1',
      title: 'Starts',
      description: 'Starts',
      alt: 'Starts',
      thumbName: 'portfolio minyue wang_Page_01.jpg',
      imgName: "portfolio minyue wang_Page_01.jpg",
      classes: 'item item-mid',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '2',
      title: 'Ocean Playmat',
      description: 'Ocean Playmat',
      alt: 'Ocean Playmat',
      thumbName: 'portfolio minyue wang_Page_02.jpg',
      imgName: "portfolio minyue wang_Page_02.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '3',
      title: 'Ocean Playmat',
      description: 'Ocean Playmat',
      alt: 'Ocean Playmat',
      thumbName: 'portfolio minyue wang_Page_03.jpg',
      imgName: "portfolio minyue wang_Page_03.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '4',
      title: 'Ocean Playmat',
      description: 'Ocean Playmat',
      alt: 'Ocean Playmat',
      thumbName: 'portfolio minyue wang_Page_04.jpg', 
      imgName: "portfolio minyue wang_Page_04.jpg",
      classes: 'item item-mid',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '5',
      title: 'Ocean Playmat',
      description: 'Ocean Playmat',
      alt: 'Ocean Playmat',
      thumbName: 'portfolio minyue wang_Page_05.jpg', 
      imgName: "portfolio minyue wang_Page_05.jpg",
      classes: 'item item-mid',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '6',
      title: 'Ocean Playmat',
      description: 'Ocean Playmat',
      alt: 'Ocean Playmat',
      thumbName: 'portfolio minyue wang_Page_06.jpg', 
      imgName: "portfolio minyue wang_Page_06.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '7',
      title: 'Ocean Playmat',
      description: 'Ocean Playmat',
      alt: 'Ocean Playmat',
      thumbName: 'portfolio minyue wang_Page_07.jpg', 
      imgName: "portfolio minyue wang_Page_07.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '8',
      title: 'Ocean Playmat',
      description: 'Ocean Playmat',
      alt: 'Ocean Playmat',
      thumbName: 'portfolio minyue wang_Page_08.jpg', 
      imgName: "portfolio minyue wang_Page_08.jpg",
      classes: 'item item-mid',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '9',
      title: 'Ocean Playmat',
      description: 'Ocean Playmat',
      alt: 'Ocean Playmat',
      thumbName: 'portfolio minyue wang_Page_09.jpg', 
      imgName: "portfolio minyue wang_Page_09.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '10',
      title: 'Vary Chair',
      description: 'Vary Chair',
      alt: 'Vary Chair',
      thumbName: 'portfolio minyue wang_Page_10.jpg', 
      imgName: "portfolio minyue wang_Page_10.jpg",
      classes: 'item item-big',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '11',
      title: 'Vary Chair',
      description: 'Vary Chair',
      alt: 'Vary Chair',
      thumbName: 'portfolio minyue wang_Page_11.jpg', 
      imgName: "portfolio minyue wang_Page_11.jpg",
      classes: 'item item-mid',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '12',
      title: 'Vary Chair',
      description: 'Vary Chair',
      alt: 'Vary Chair',
      thumbName: 'portfolio minyue wang_Page_12.jpg', 
      imgName: "portfolio minyue wang_Page_12.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '13',
      title: 'Vary Chair',
      description: 'Vary Chair',
      alt: 'Vary Chair',
      thumbName: 'portfolio minyue wang_Page_13.jpg', 
      imgName: "portfolio minyue wang_Page_13.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '14',
      title: 'Vary Chair',
      description: 'Vary Chair',
      alt: 'Vary Chair',
      thumbName: 'portfolio minyue wang_Page_14.jpg', 
      imgName: "portfolio minyue wang_Page_14.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '15',
      title: 'Vary Chair',
      description: 'Vary Chair',
      alt: 'Vary Chair',
      thumbName: 'portfolio minyue wang_Page_15.jpg', 
      imgName: "portfolio minyue wang_Page_15.jpg",
      classes: 'item item-mid',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '16',
      title: 'Entrance Rack',
      description: 'Entrance Rack',
      alt: 'Entrance Rack',
      thumbName: 'portfolio minyue wang_Page_16.jpg', 
      imgName: "portfolio minyue wang_Page_16.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '17',
      title: 'Entrance Rack',
      description: 'Entrance Rack',
      alt: 'Entrance Rack',
      thumbName: 'portfolio minyue wang_Page_17.jpg', 
      imgName: "portfolio minyue wang_Page_17.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '18',
      title: 'Entrance Rack',
      description: 'Entrance Rack',
      alt: 'Entrance Rack',
      thumbName: 'portfolio minyue wang_Page_18.jpg', 
      imgName: "portfolio minyue wang_Page_18.jpg",
      classes: 'item item-mid',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '19',
      title: 'Entrance Rack',
      description: 'Entrance Rack',
      alt: 'Entrance Rack',
      thumbName: 'portfolio minyue wang_Page_19.jpg', 
      imgName: "portfolio minyue wang_Page_19.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '20',
      title: 'Entrance Rack',
      description: 'Entrance Rack',
      alt: 'Entrance Rack',
      thumbName: 'portfolio minyue wang_Page_20.jpg', 
      imgName: "portfolio minyue wang_Page_20.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '21',
      title: 'Entrance Rack',
      description: 'Entrance Rack',
      alt: 'Entrance Rack',
      thumbName: 'portfolio minyue wang_Page_21.jpg', 
      imgName: "portfolio minyue wang_Page_21.jpg",
      classes: 'item item-mid',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
      id: '22',
      title: 'Entrance Rack',
      description: 'Entrance Rack',
      alt: 'Entrance Rack',
      thumbName: 'portfolio minyue wang_Page_22.jpg', 
      imgName: "portfolio minyue wang_Page_22.jpg",
      classes: 'item',
      tags: ['photo', 'color', 'pattern', 'light']
    },
    {
        id: '23',
        title: 'Entrance Rack',
        description: 'Entrance Rack',
        alt: 'Entrance Rack',
        thumbName: 'portfolio minyue wang_Page_23.jpg', 
        imgName: "portfolio minyue wang_Page_23.jpg",
        classes: 'item',
        tags: ['photo', 'color', 'pattern', 'light']
      },
      {
        id: '24',
        title: 'Vignelli Coat',
        description: 'Vignelli Coat',
        alt: 'Vignelli Coat',
        thumbName: 'portfolio minyue wang_Page_24.jpg', 
        imgName: "portfolio minyue wang_Page_24.jpg",
        classes: 'item',
        tags: ['photo', 'color', 'pattern', 'light']
      },
      {
        id: '25',
        title: 'Vignelli Coat',
        description: 'Vignelli Coat',
        alt: 'Vignelli Coat',
        thumbName: 'portfolio minyue wang_Page_25.jpg', 
        imgName: "portfolio minyue wang_Page_25.jpg",
        classes: 'item',
        tags: ['photo', 'color', 'pattern', 'light']
      },
      {
        id: '26',
        title: 'Vignelli Coat',
        description: 'Vignelli Coat',
        alt: 'Vignelli Coat',
        thumbName: 'portfolio minyue wang_Page_26.jpg', 
        imgName: "portfolio minyue wang_Page_26.jpg",
        classes: 'item',
        tags: ['photo', 'color', 'pattern', 'light']
      },
      {
        id: '27',
        title: 'Vignelli Coat',
        description: 'Vignelli Coat',
        alt: 'Vignelli Coat',
        thumbName: 'portfolio minyue wang_Page_27.jpg', 
        imgName: "portfolio minyue wang_Page_27.jpg",
        classes: 'item',
        tags: ['photo', 'color', 'pattern', 'light']
      },
      {
        id: '28',
        title: 'Vignelli Coat',
        description: 'Vignelli Coat',
        alt: 'Vignelli Coat',
        thumbName: 'portfolio minyue wang_Page_28.jpg', 
        imgName: "portfolio minyue wang_Page_28.jpg",
        classes: 'item',
        tags: ['photo', 'color', 'pattern', 'light']
      },
      {
        id: '29',
        title: 'Vignelli Coat',
        description: 'Vignelli Coat',
        alt: 'Vignelli Coat',
        thumbName: 'portfolio minyue wang_Page_29.jpg', 
        imgName: "portfolio minyue wang_Page_29.jpg",
        classes: 'item',
        tags: ['photo', 'color', 'pattern', 'light']
      },
      {
        id: '30',
        title: 'Giobagnara',
        description: 'Giobagnara',
        alt: 'Giobagnara',
        thumbName: 'portfolio minyue wang_Page_30.jpg', 
        imgName: "portfolio minyue wang_Page_30.jpg",
        classes: 'item',
        tags: ['photo', 'color', 'pattern', 'light']
      },
      {
        id: '31',
        title: 'NEXCOO',
        description: 'NEXCOO',
        alt: 'NEXCOO',
        thumbName: 'portfolio minyue wang_Page_31.jpg', 
        imgName: "portfolio minyue wang_Page_31.jpg",
        classes: 'item',
        tags: ['photo', 'color', 'pattern', 'light']
      },
      {
        id: '32',
        title: 'End',
        description: 'End',
        alt: 'End',
        thumbName: 'portfolio minyue wang_Page_32.jpg', 
        imgName: "portfolio minyue wang_Page_32.jpg",
        classes: 'item',
        tags: ['photo', 'color', 'pattern', 'light']
      }
  ];
  


var imgSrc = "./material/image/portfolio/"; 
var imgName;
var dataLength = picsData.length;
var loopLength = 3; //Set loop length.
var initItemsLength = 9; //set initial items length.
var itemDelay = 300; //Set delay between appended items.

$(function() {
  $('#spinner').fadeOut();
})
//Create elements:
function getItem(param) {
  //Find data:
  var imgName = picsData[param].thumbName;
  //Create image:
  var image = new Image();
  image.className = 'img-item';
  image.src = imgSrc + imgName;
  //Create title:
  var title = document.createElement('span');
  title.className = "thumb-title";
  titleText = document.createTextNode(picsData[param].title);
  title.appendChild(titleText);
  //Create container:
  var item = document.createElement('div');
  item.className = picsData[param].classes;
  item.appendChild(title);
  item.appendChild(image);
  return item;
}

//Append initial items:
function appendItemInit(){
  for (i=0; i<initItemsLength; i++) {
    (function(i){
      setTimeout(function(){
        if (initItemsLength<dataLength) {
          //Get item:
          var elems = getItem(i);
          //Create jQuery object:
          var $elems = $(elems);
          //Append item:
          $(".grid").append($elems);
          // console.log(picsData[i].id);
        }
        else {
          $('.append-button').hide();
          $(".status").fadeIn();
        };
      }, itemDelay * i);
    }(i)); //Add delay between appended items.
  };
};
appendItemInit();

//Append new items:
function appendItem(){
  for (i=0; i<loopLength; i++) {
    (function(i){
      setTimeout(function(){
        if (initItemsLength<dataLength) {
          //Get item:
          var elems = getItem(initItemsLength);
          //Create jQuery object:
          var $elems = $(elems);
          //Append item:
          $(".grid").append($elems);
          // console.log(picsData[initItemsLength].id);
          //Modify items counter:
          initItemsLength += 1;
        }
        else {
          $('.append-button').hide();
          $(".status").fadeIn();
        };
      }, itemDelay * i);
    }(i)); //Add delay between appended items.
  };
};
$('.append-button').click(function() {
  appendItem();
});

//Infinite Scroll (trigger):
$(window).scroll(function() {
  if(Math.ceil($(window).scrollTop() + window.innerHeight) == $(document).height()) {
    appendItem();
  }
});

//Lightbox:
//Binding DOM after newly appended elements.
$(document).on('click', '.item', function() {
  //Find item into JSON:
  var thisItem = $(this).find(".img-item").attr("src");
  var n = thisItem.lastIndexOf('/');
  var result = thisItem.substring(n + 1);
  var index = picsData.map(function(e) { return e.thumbName; }).indexOf(result);
  console.log(index);
  //Lightbox display (fade in):
  $(".lightbox").css({
    "background": "url("+imgSrc+picsData[index].imgName+") no-repeat center",
    "background-size": "contain"
  });
  $(".sandbox").fadeIn(100);
  //Hide scrollbar
  $("html").css({"overflow-y": "hidden"});
});
//Lightbox display (fade out):
$(".sandbox").click(function(){
  $(".sandbox").fadeOut(100);
  //Show scrollbar:
  $("html").css({"overflow-y": "auto"});
});




